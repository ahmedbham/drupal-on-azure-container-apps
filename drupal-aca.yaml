location: LOCATION
name: CONTAINER_APP_NAME
resourceGroup: RESOURCE_GROUP
type: Microsoft.App/containerApps
properties:
  managedEnvironmentId: ENVIRONMENT_ID
  configuration:
    activeRevisionsMode: Single
    dapr: null
    ingress:
      external: true
      allowInsecure: false
      targetPort: 8080
      traffic:
        - latestRevision: true
          weight: 100
      transport: Auto
    registries: null
    secrets: null
    service: null
  template:
    revisionSuffix: ''
    containers:
      - image: docker.io/bitnami/drupal-nginx:8-debian-10
        name: drupal
        env:
        - name: DRUPAL_DATABASE_NAME
          value: DRUPAL_DB_NAME
        - name: DRUPAL_DATABASE_PASSWORD
          value: DRUPAL_DB_PASSWORD
        - name: DRUPAL_DATABASE_USER
          value: DRUPAL_DB_USER
        - name: DRUPAL_DATABASE_PORT_NUMBER
          value: '3306'
        - name: DRUPAL_DATABASE_HOST
          value: DRUPAL_DB_HOST
        resources:
          cpu: 2
          ephemeralStorage: 8Gi
          memory: 4Gi
        volumeMounts:
        - mountPath: /bitnami/drupal
          volumeName: mystoragemount
    volumes:
    - name: mystoragemount
      storageName: STORAGE_MOUNT_NAME
      storageType: AzureFile
    scale:
      minReplicas: MIN_REPLICAS
      maxReplicas: MAX_REPLICAS
